import pygame
import random

# إعدادات الشاشة
pygame.init()
width, height = 800, 600
screen = pygame.display.set_mode((width, height))
pygame.display.set_caption("My Faded Matrix")

# الألوان
black = (0, 0, 0)
# اخترنا لون أخضر داكن قليلاً لزيادة تأثير البهتان
matrix_green = (0, 150, 50) 
font = pygame.font.SysFont("monospace", 20)

# --- التعديل الأساسي هنا ---
# سنقوم بإنشاء الحروف وجعلها شفافة (باهتة) منذ البداية
def get_faded_letter():
    char_list = [str(i) for i in range(10)] + [chr(random.randint(33, 126)) for _ in range(10)]
    char = random.choice(char_list)
    render = font.render(char, True, matrix_green)
    # خفض الشفافية (0 شفاف تماماً، 255 واضح تماماً)
    # الـ 100 تعطي توازناً بين الوضوح والبهتان
    render.set_alpha(100) 
    return render

# إعداد الأعمدة
column_count = width // 20
drops = [random.randint(-height // 20, 0) for _ in range(column_count)]

clock = pygame.time.Clock()

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # رسم خلفية سوداء (بشفافية أعلى لتقليل أثر الذيل وجعل الحروف تبرز بوضوح أكبر)
    overlay = pygame.Surface((width, height))
    overlay.set_alpha(50) 
    overlay.fill(black)
    screen.blit(overlay, (0, 0))

    # تحريك ورسم الحروف
    for i in range(len(drops)):
        # نولد حرفاً باهتاً في كل مرة للحصول على تنوع
        char = get_faded_letter()
        x = i * 20
        y = drops[i] * 20
        
        screen.blit(char, (x, y))

        # إعادة الحرف للأعلى إذا خرج من الشاشة
        if y > height and random.random() > 0.975:
            drops[i] = 0
        
        drops[i] += 1

    pygame.display.flip()
    clock.tick(30)

pygame.quit()
